+++
title = "Nano KVMについて" # ページタイトル
date = 2025-01-19T00:00:00+09:00
weight = 3
draft = false
categories = ["Server"]
tags = ["Author:DD Erikson", "Level:初級", "Type:Handson", "IP KVM", "Server Management"]
+++

# NanoKVMを触る

## KVMとは

* 一説によると、Keyboard Video Mouseの略らしいです。  
* 何をするものかというと、サーバーを管理する際にモニターとキーボードとマウスをつなげて操作するような環境を用意する装置全般を指します。
* 多くの場合、一つのモニター、キーボード、マウスで複数台を切り替えながら操作できるようにしたものを指す事が多いです。イーサネット経由でサーバーに対して操作ができるものをIP KVMと呼びます。
* ATENとかラリタンとかが出してますが、クソ高いのでご家庭のサーバーにつけるにはちょっと難しいものです。  
* 一応、PiKVMのようなRaspberry piでKVMを実現するソリューションもありますが、こちらもあまり安くはない上、DIYも難しいのでコストの面から選択肢として微妙です。  

## NanoKVMとは

* そんなKVM難民の革命児ともいえるNanoKVM、少し前にTwitterで話題になっていました。
* 私は[Amazon](https://amzn.asia/d/4fw1FMh)で購入しましたが、おおよそ1万円ぐらいでした。公式販売サイトは[Aliexpress](https://ja.aliexpress.com/item/1005007369816019.html)みたいです。注文してから半月ぐらいで到着しました。
* 電源制御、ブラウザベースでのリモートアクセス、仮想ドライブ、コンソールサーバーの機能があるらしい。（今回はリモートアクセスの用途でのみセットアップ）

## 開封

* 到着時パッケージ  
![Package1](/img/nano_kvm/IMG_20250112_105653301.jpg) 
![Package2](/img/nano_kvm/IMG_20250112_105823128.jpg) 

* 中身はこんな感じでした  
![全体](/img/nano_kvm/IMG_20250112_110052347.jpg) 
![KVM-B](/img/nano_kvm/IMG_20250112_110155957.jpg) 

* KVM-B裏面  
![KVM-B裏](/img/nano_kvm/IMG_20250112_110546826.jpg) 

説明書はなかったですが、本体横のカラフルな接続図でだいたい察することができました。  
また、KVM-Bもちゃんとピンの役割が書いてあったので何をするものか容易に察することができました。

## 接続

書いてあるとおりに接続をします。

* KVM-Bにはマザーボードに刺す側とケースからのケーブルを刺すピンがあるので表記のとおりに接続します。
* うちのサーバー機のASUS製マザーボードはピンの配列がそのままだったので付属のジャンパケーブルは使わずに接続できました。これでケースからのスイッチでの電源オンオフとリセットができ、KVM-AからのPower制御もできるようです。  
![KVM-B接続](/img/nano_kvm/IMG_20250117_233228731.jpg) 

* 付属のType-C USBケーブルで本体に接続し、本体からPCに付属のType-C USBケーブルで接続、PCからのHDMIケーブルを本体に接続します。スイッチからLANケーブルを繋げます。  
* 電源をいれるとDHCPでIPアドレスを拾ってくれたようで、しばらくするとLCDにIPアドレスが表示されました。  
* 本体にはPowerボタンとResetボタンがあり、このボタンでKVM-B経由でサーバー機のハードスイッチと同等の動きをします。  
![KVM-A接続](/img/nano_kvm/IMG_20250117_233338340.jpg) 

* でてきたIPアドレスにアクセスするとIDとパスワードを求められたので、適当にadmin/adminと入れたらログインできました。  
![ログイン](/img/nano_kvm/2025-01-18003653.png) 

* admin/adminだと心配なので歯車マークから変更できそうだったのでパスワードを変更したところ入れなくなりました。  
* [wiki](https://wiki.sipeed.com/hardware/en/kvm/NanoKVM/introduction.html)曰く、Bootボタンを10秒押せばリセットできる、とのことでしたが、Bootボタンがどこにあるかの表記はなく、分解してみたところボタンがありました。
* HIDを接続するType-C端子の右側のボタンを押すとLCDがリセットされるようだったので、これだと思ったので10秒間長押しするとリセットされました。  
![ボタン](/img/nano_kvm/IMG_20250118_000504478.jpg) 

* 裏面にはSDカードが刺さっていました。Wiki曰く、イメージファイルの保存などに使われるそうです。KIOXIA製です。  
![SDカード](/img/nano_kvm/IMG_20250118_000457265.jpg) 

## 使用感

* こういうのでいいんだよ…こういうので…。
* 必要十分でかつちゃんと動いてわかりやすい。手に取っただけで使える製品って珍しいなって思いました。
* 基本的に説明資料なしでも接続してアクセスまでいけます。コンソール機能や仮想ドライブ機能を使う場合や、ちょっとトラブルがあった場合はWikiを読みますが、英語なのでなんとかなります。
* ファームウェアのアップデートはこの手の製品にしては自動アップデートに対応しており、アップデートを押すと自動でWEBからダウンロードしてきて適用してくれます。
* ブラウザで完結させられるのもとても楽です。
* H264で動画圧縮をしているようで、かなり機敏に動いてくれます。ちゃんとUEFI設定画面も表示されました。  
![RAID0](/img/nano_kvm/2025-01-18002626.png) 

* この価格でこの機能と使用感なら全然良いと言いますか、むしろ~~殿様商売をしている~~某社のIPKVMとかよりも使い勝手が良いように思います。KVMより、使用感としてはIPMIに近いです。
* 最大の問題は、中国発の製品であるというところでしょうか…。どうしても拭えないなにかがあります。
* また、セキュリティが甘い感じがあります。GUIの初期パスワードはadmin/admin、SSHの初期パスワードもroot/rootのようで、SSHのパスワードはGUIのパスワードと同じものになりますが、ユーザ名はrootのままのようです。
* PCIeに刺す形もあるようなので、実際サーバーに使うにはそちらのほうが良いかもしれません。コンソールサーバー目的ならこの形でもいいと思います。
* この手のものは競合製品がでてきているようなので、そちらの動向も気になります。こういった製品がKVMの世界に革命を起こしてほしいものです。

以上です